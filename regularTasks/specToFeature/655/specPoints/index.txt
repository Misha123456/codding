Spec link:
https://kb.epam.com/display/EPMESPVELC/02.01.014+Ability+of+the+end+user+to+select+tariff+on+Service+details+page

Contact person:
Olga

Вся сторя про отрисовку + бэкенд тарифов

--- Designs ---
- Сервис без вариантов
- Сервис с вариантами
-- нужно будет перерисовать (ajax) кнопки возможности активации сервиса

--- General notes ---
- isPublic and isArchived - определяют видимость сервиса для пользователей (всех)
- isB2C and isB2B - определяет для какого пользователя доступна услуга, а для какого - нет
- marketing weight - определяет порядок отображения на ui
- система всегда показывает юзеру преселектнутый его текущий тариф
(его текущий тариф всегда добавляется в дропдаун)

--- Business rules ---

1 -
2 - Тариф добавляется в дропдаун, если
     - isPublic and isNotArchived
     - assigned to individual subscriber
     - associated to the service or at least one variant

3 - Default value for tariff selector
 для заголиненого юзера
a) Individual. Показывает его текущий тариф
b) Corporate. Показывает текущий корпоративный тариф.
Корпоративный тариф виден только самому корпоративному пользователю и больше никому другому (question)
c) Для анонимного юзера показываем первый из списка тариф
Если система не может определить тариф для текущего пользователя - то показываем как для анонимного
Если текущий тариф пользователя является архивный или непубличным, он все равно должен быть добавлен в
дропдаун как для индивидуального пользователя, так и для корпоративного. В других случаях - архивные и
непубличные сервисы не добавляются в дропдаун

4 - Тарифы в дропдауне отсортированы по marketing weight по убыванию
- Если маркетинг  вес совпадает, то ордер неопределен

5 - Расположение дропдауна на ui зависит от типа сервиса (с вариантами или без) (в соответствии с дизайном)

6 - Эррор месаджи должны быть локализованы

7 - Страница будет рефрешиться частично (using ajax calls) (в соответствии с картинками в этом BR)

--- Assumptions ---
Тариф можно выбрать из выпадающего списка

Для анонимного пользователя мы должны увидеть первый из списка, а для
залогиненого пользователя - его текущий тарифный план

Все еррор мессаджи ложатся в проперти файлы

Выбранный тариф не будет храниться в системе. Когда юзер переходит на страницу -
он видет дефолтное значение выбранным

--- Запилено в рамках другой стори ---
отображение доступна ли кнопка для активации (запилено)
прайсы (запилено)
бандлы (асайн сервисов на тарифные планы) (запилено)
отображение кнопки активации для корпоративного клиента (запилено)
доступен ли сервис для активации (запилено)

--- Acceptance criteria ---
1 - Preselected tariff в дропдауне
Для всех юзеров (индивидуальный, корпоративный, аноним) (3 cases)
Сервисы и тарифы существуют в системе (1 case)
Когда я перехожу на service PDP: (1 case)
- я вижу лейбу "Для тарифного плана"
- я вижу дропдаун с тарифами
- я вижу:
-- текущий тариф для индивидуального и корпоративного пользователя
-- первый из списка для анонимного пользователя

Total cases: 3 * 1 * 1 = 3

--------------------------------------------------------

2 - Просмотр тарифов в дропдауне
Для всех юзеров (индивидуальный, корпоративный, аноним) (3 cases)
Сервисы и тарифы существуют в системе (1 case)
Перехожу на service PDP и вижу дропдаун
Кликаю на выпадающем списке (1 case)
Вижу список тарифов в соответствии с BR2 & BR4

Total cases: 3 * 1 * 1 = 3

--------------------------------------------------------

3 - Активейшн батн. Сервис и тариф ассоциированы
Анонимный юзер (1 case)
Перехожу на service PDP
Сервис или сервис вариант ассоциирован с селектнутым тарифом (2 cases)
Сервис должен быть доступен для активации
Перехожу на страницу этого сервиса и вижу, что он доступен для активации

Total cases: 1 * 2 = 2

--------------------------------------------------------

4 - Activation button. Service and tariff NOT associated
Анонимный юзер (1 case)
Перехожу на service PDP
Сервис или сервис вариант НЕ ассоциирован с селектнутым тарифом (2 cases)
Переходим на страницу сервиса и видим NOT ALLOWED DUE ELIGIBILITY

Total cases: 1 * 2 = 2

--------------------------------------------------------

5 - Change user tariff
Individual (1 case)
Перехожу на service PDP вижу дропдаун и мой тариф преселектнут
Выбираю другой тариф
Делается рефреш в соответствии с BR7
У меня нету возможности активировать сервис или вариант (2 cases)
Кнопка активации серая
Сообщение об ошибке показано

Total cases: 1 * 2 = 2